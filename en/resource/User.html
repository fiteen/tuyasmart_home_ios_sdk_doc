
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>User Management Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="User.html" />
    
    
    <link rel="prev" href="iOSAdaptation.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Initiate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Demo.html">
            
                <a href="Demo.html">
            
                    
                    Demo App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="iOSAdaptation.html">
            
                <a href="iOSAdaptation.html">
            
                    
                    iOS Adaptation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="User.html">
            
                <a href="User.html#user-management">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="User.html">
            
                <a href="User.html#use-mobile-phone-for-login">
            
                    
                    Use Mobile Phone for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="User.html">
            
                <a href="User.html#use-email-for-login">
            
                    
                    Use Email for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="User.html">
            
                <a href="User.html#use-uid-for-login">
            
                    
                    Use Uid for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="User.html">
            
                <a href="User.html#third-party-login">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="User.html">
            
                <a href="User.html#login-by-auth2">
            
                    
                    Login by Auth2(Login with Apple)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="User.html">
            
                <a href="User.html#modify-user-avatar">
            
                    
                    Modify User Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="User.html">
            
                <a href="User.html#logout">
            
                    
                    Logout, Disable Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="User.html">
            
                <a href="User.html#handling-of-expired-session">
            
                    
                    Handling of Expired Session
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="HomeAbout.html">
            
                <a href="HomeAbout.html">
            
                    
                    Home Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Home.html">
            
                <a href="Home.html#home-relationship-management">
            
                    
                    Home Relationship Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="Home.html">
            
                <a href="Home.html#home-information-management">
            
                    
                    Operation of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Home.html">
            
                <a href="Home.html#member-management">
            
                    
                    Home Member Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="Home.html">
            
                <a href="Home.html#room-information-management">
            
                    
                    Room Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="Home.html">
            
                <a href="Home.html#home-weather">
            
                    
                    Home's Weather
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Activator.html">
            
                <a href="Activator.html#network-configuration">
            
                    
                    Network Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="Activator.html">
            
                <a href="Activator.html#quick-connection-mode">
            
                    
                    Quick Connection Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="Activator.html">
            
                <a href="Activator.html#hotspot-mode">
            
                    
                    HotSpot Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="Activator.html">
            
                <a href="Activator.html#wired-network-configuration">
            
                    
                    Wired Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="Activator.html">
            
                <a href="Activator.html#activate-the-sub-device">
            
                    
                    Activate the Sub-Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="Activator.html">
            
                <a href="Activator.html#qr-code-mode">
            
                    
                    QR code mode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Device.html">
            
                <a href="Device.html#device-management">
            
                    
                    Device Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Device.html">
            
                <a href="Device.html#update-device-information">
            
                    
                    Update Device Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Device.html">
            
                <a href="Device.html#device-control">
            
                    
                    Device Control
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="Device.html">
            
                <a href="Device.html#standard-device-control-beta">
            
                    
                    Standard Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="Device.html">
            
                <a href="Device.html#custom-device-control">
            
                    
                    Custom Device Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="Device.html">
            
                <a href="Device.html#modify-the-device-name">
            
                    
                    Modify the Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="Device.html">
            
                <a href="Device.html#remove-device">
            
                    
                    Remove Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="Device.html">
            
                <a href="Device.html#restore-factory-settings">
            
                    
                    Restore Factory Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="Device.html">
            
                <a href="Device.html#obtain-wi-fi-signal-strength-of-device">
            
                    
                    Obtain Wi-Fi Signal Strength of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="Device.html">
            
                <a href="Device.html#obtain-the-sub-device-list-of-a-gateway">
            
                    
                    Obtain the Sub-Device List of a Gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Device.html">
            
                <a href="Device.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Share.html">
            
                <a href="Share.html#shared-devices">
            
                    
                    Share Devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="Share.html">
            
                <a href="Share.html#add-device-share">
            
                    
                    Add Device Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="Share.html">
            
                <a href="Share.html#getting-shared-relationships">
            
                    
                    Getting Shared Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="Share.html">
            
                <a href="Share.html#remove-sharing">
            
                    
                    Remove Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="Share.html">
            
                <a href="Share.html#modify-note-name">
            
                    
                    Modify Note Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer Task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="SmartSceneAbout.html">
            
                <a href="SmartSceneAbout.html">
            
                    
                    Smart Scene
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="SmartScene.html">
            
                <a href="SmartScene.html#smart-scene-management">
            
                    
                    Smart Scene Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="SmartScene.html">
            
                <a href="SmartScene.html#scene-operation">
            
                    
                    Scene Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="BLE.html">
            
                <a href="BLE.html#single-ble">
            
                    
                    Single BLE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="BLE.html">
            
                <a href="BLE.html#bluetooth-status-monitor">
            
                    
                    Bluetooth Status Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-scan">
            
                    
                    Bluetooth Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="BLE.html">
            
                <a href="BLE.html#active-device">
            
                    
                    Active Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-ota-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="BLE.html">
            
                <a href="BLE.html#query-device-name">
            
                    
                    Query Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="BLE.html">
            
                <a href="BLE.html#device-dp-publish">
            
                    
                    Device DP Publish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="BLE.html">
            
                <a href="BLE.html#dual-mode-device-scan">
            
                    
                    Dual Mode Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="BLE.html">
            
                <a href="BLE.html#dual-mode-device-active">
            
                    
                    Dual Mode Active
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#bluetooth-mesh-sdk-guide">
            
                    
                    Bluetooth Mesh(SIG)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#introduction">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Mesh.html">
            
                <a href="Mesh.html#bluetooth-meshtuya-sdk-guide">
            
                    
                    Bluetooth Mesh(TUYA)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="Mesh.html">
            
                <a href="Mesh.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="Mesh.html">
            
                <a href="Mesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="Mesh.html">
            
                <a href="Mesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="Mesh.html">
            
                <a href="Mesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Message.html">
            
                <a href="Message.html#message-center">
            
                    
                    Message Center
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Message.html">
            
                <a href="Message.html#function-overview">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Message.html">
            
                <a href="Message.html#message">
            
                    
                    Message
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="Message.html">
            
                <a href="Message.html#push-notification">
            
                    
                    Push Notification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Feedback.html">
            
                <a href="Feedback.html#feedback">
            
                    
                    Feedback
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-talk-list">
            
                    
                    Obtain Feedback Talk List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-list">
            
                    
                    Obtain Feedback List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-type-list">
            
                    
                    Obtain Feedback Type List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4" data-path="Feedback.html">
            
                <a href="Feedback.html#add-feedback">
            
                    
                    Add Feedback
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="CommonInterface.html">
            
                <a href="CommonInterface.html">
            
                    
                    Common Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="Push.html">
            
                <a href="Push.html">
            
                    
                    Register PushId
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" >
            
                <a target="_blank" href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_api_reference/index.html">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Faq.html">
            
                <a href="Faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="ChangeLog.html">
            
                <a href="ChangeLog.html">
            
                    
                    ChangeLog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >User Management</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><ul><li><span class="title-icon "></span><a href="#user-management"><b>1.1. </b>User management</a></li><ul><li><span class="title-icon "></span><a href="#use-mobile-phone-for-login"><b>1.1.1. </b>Use Mobile Phone for Login</a></li><li><span class="title-icon "></span><a href="#use-email-for-login"><b>1.1.2. </b>Use Email for Login</a></li><li><span class="title-icon "></span><a href="#use-uid-for-login"><b>1.1.3. </b>Use Uid for Login</a></li><li><span class="title-icon "></span><a href="#third-party-login"><b>1.1.4. </b>Third Party Login</a></li><li><span class="title-icon "></span><a href="#login-by-auth2"><b>1.1.5. </b>Login by Auth2</a></li><li><span class="title-icon "></span><a href="#modify-user-avatar"><b>1.1.6. </b>Modify User Avatar</a></li><li><span class="title-icon "></span><a href="#set-the-unit-of-temperature"><b>1.1.7. </b>Set the Unit of Temperature</a></li><li><span class="title-icon "></span><a href="#modify-nickname"><b>1.1.8. </b>Modify Nickname</a></li><li><span class="title-icon "></span><a href="#update-timezone"><b>1.1.9. </b>Update Timezone</a></li><li><span class="title-icon "></span><a href="#update-location"><b>1.1.10. </b>Update Location</a></li><li><span class="title-icon "></span><a href="#logout"><b>1.1.11. </b>Logout</a></li><li><span class="title-icon "></span><a href="#disable-account-deregister-user"><b>1.1.12. </b>Disable Account (Deregister User)</a></li><li><span class="title-icon "></span><a href="#handling-of-expired-session"><b>1.1.13. </b>Handling of Expired Session</a></li></ul></ul></ul></div><h2 id="user-management"><a name="user-management" class="anchor-navigation-ex-anchor" href="#user-management"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. User management</h2>
<p>Tuya Cloud supports various kinds of user systems such as mobile phone, email and UID. Mobile phone supports verification code login and password login. The registration and login of each user system will be separately described later.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Class Name</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TuyaSmartUser</td>
<td style="text-align:center">User-related classes</td>
</tr>
<tr>
<td style="text-align:center">TuyaSmartRequest</td>
<td style="text-align:center">Universal interface classes</td>
</tr>
</tbody>
</table>
<p>The <code>countryCode</code> parameter (country code) needs to be provided in the registration and login method for region selection of Tuya Cloud. Data of all available regions is independent. The Chinese Mainland account <code>(country code: 86)</code> cannot be used in the <code>USA (country code: 1)</code>. The Chinese Mainland account does not exist in the USA region.</p>
<p>For details about available region, please refer to the <a href="https://docs.tuya.com/cn/cloudapi/api/cloudapi/" target="_blank">Tuya Cloud-Available Region</a></p>
<p>All functions of user are realized by using the <code>TuyaSmartUser</code> Class (singleton).</p>
<h3 id="use-mobile-phone-for-login"><a name="use-mobile-phone-for-login" class="anchor-navigation-ex-anchor" href="#use-mobile-phone-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. Use Mobile Phone for Login</h3>
<p>Tuya Smart provides the mobile phone verification code login system.</p>
<h4 id="use-mobile-phone-password-for-registration"><a name="use-mobile-phone-password-for-registration" class="anchor-navigation-ex-anchor" href="#use-mobile-phone-password-for-registration"><i class="fa fa-link" aria-hidden="true"></i></a><a name="use-mobile-phone-password-for-registration" class="plugin-anchor" href="#use-mobile-phone-password-for-registration"><i class="fa fa-link" aria-hidden="true"></i></a>Use Mobile Phone Password for Registration</h4>
<p>The mobile phone and password registration process is divided into the following two steps: get a mobile phone verification code - Register a mobile phone and password account.</p>
<p><strong>Declaration</strong></p>
<p>Send verification code. Used for mobile phone verification code login, register, password reset.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendVerifyCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
           phoneNumber<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>phoneNumber
                  type<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>type
               success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
               failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">phoneNumber</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">0: mobile phone verification code login, 1: mobile phone verification code register, 2: mobile phone password reset.</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> sendVerifyCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> phoneNumber<span class="token punctuation">:</span><span class="token string">@&quot;your_phone_number&quot;</span> type<span class="token punctuation">:</span><span class="token number">1</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sendVerifyCode success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sendVerifyCode failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">sendVerifyCode</span><span class="token punctuation">(</span><span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> phoneNumber<span class="token punctuation">:</span> <span class="token string">&quot;your_phone_number&quot;</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sendVerifyCode success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sendVerifyCode failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Register a mobile phone and password account.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>registerByPhone<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
            phoneNumber<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>phoneNumber
               password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
                   code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
                success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">phoneNumber</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">password</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> registerByPhone<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> phoneNumber<span class="token punctuation">:</span><span class="token string">@&quot;your_phone_number&quot;</span> password<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;register success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;register failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>byPhone<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> phoneNumber<span class="token punctuation">:</span> <span class="token string">&quot;your_phone_number&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;register success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;register failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>You can also use the following verification verification code interface to separately verify whether the verification code is correct. The interface supports verification of mobile phone SMS verification codes and mail verification codes.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>checkCodeWithUserName<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>userName
                       region<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span>_Nullable<span class="token punctuation">)</span>region
                  countryCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                         code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
                         type<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>type
                      success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessBOOL<span class="token punctuation">)</span>success
                      failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x53C2;&#x6570;</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">userName</td>
<td style="text-align:left">Phone number or email</td>
</tr>
<tr>
<td style="text-align:left">region</td>
<td style="text-align:left">Region, default value is nil</td>
</tr>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">Type, 1: mobile phone verification code register, 2: mobile phone verification code login, 3: mobile phone password reset</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> checkCodeWithUserName<span class="token punctuation">:</span><span class="token string">@&quot;email_or_phone_number&quot;</span> region<span class="token punctuation">:</span><span class="token string">@&quot;region&quot;</span> countryCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> type<span class="token punctuation">:</span>type success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;valid code!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;invalid code!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;check code failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">checkCode</span><span class="token punctuation">(</span>withUserName<span class="token punctuation">:</span> <span class="token string">&quot;email_or_phone_number&quot;</span><span class="token punctuation">,</span> region<span class="token punctuation">:</span> <span class="token string">&quot;region&quot;</span><span class="token punctuation">,</span> countryCode<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> type<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> result <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;valid code!&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;invalid code!&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> error <span class="token operator">=</span> error <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;check code failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="use-mobile-phone-verification-code-for-login"><a name="use-mobile-phone-verification-code-for-login" class="anchor-navigation-ex-anchor" href="#use-mobile-phone-verification-code-for-login"><i class="fa fa-link" aria-hidden="true"></i></a><a name="use-mobile-phone-verification-code-for-login" class="plugin-anchor" href="#use-mobile-phone-verification-code-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>Use Mobile Phone Verification Code for Login</h4>
<p>The mobile phone number and verification code login process is divided into the following two steps: get the mobile phone verification code (the API refers to the first interface of &quot;Use Mobile Phone Password for Registration&quot;) - verification code login.</p>
<p><strong>Declaration</strong></p>
<p>verification code login</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginWithMobile<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>mobile
            countryCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                   code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
                success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success
                failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mobile</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginWithMobile<span class="token punctuation">:</span><span class="token string">@&quot;your_phone_number&quot;</span> countryCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>withMobile<span class="token punctuation">:</span> <span class="token string">&quot;your_phone_number&quot;</span><span class="token punctuation">,</span> countryCode<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="use-mobile-phone-password-for-login"><a name="use-mobile-phone-password-for-login" class="anchor-navigation-ex-anchor" href="#use-mobile-phone-password-for-login"><i class="fa fa-link" aria-hidden="true"></i></a><a name="use-mobile-phone-password-for-login" class="plugin-anchor" href="#use-mobile-phone-password-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>Use Mobile Phone Password for Login</h4>
<p><strong>Declaration</strong></p>
<p>SDK provides mobile phone number and password login method.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByPhone<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
         phoneNumber<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>phoneNumber
            password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
             success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
             failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">phoneNumber</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">password</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByPhone<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> phoneNumber<span class="token punctuation">:</span><span class="token string">@&quot;your_phone_number&quot;</span> password<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byPhone<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> phoneNumber<span class="token punctuation">:</span> <span class="token string">&quot;your_phone_number&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="resetting-password-by-using-mobile-phone"><a name="resetting-password-by-using-mobile-phone" class="anchor-navigation-ex-anchor" href="#resetting-password-by-using-mobile-phone"><i class="fa fa-link" aria-hidden="true"></i></a><a name="resetting-password-by-using-mobile-phone" class="plugin-anchor" href="#resetting-password-by-using-mobile-phone"><i class="fa fa-link" aria-hidden="true"></i></a>Resetting Password by Using Mobile Phone</h4>
<p>The process of resetting the password of the mobile phone number is divided into the following two steps: obtain the mobile phone verification code (the API refers to the first interface of &quot;Use Mobile Phone Password for Registration&quot;) - reset the password.</p>
<p><strong>Declaration</strong></p>
<p>Resetting Password by Using Mobile Phone</p>
<pre class="language-"><code>- (void)resetPasswordByPhone:(NSString *)countryCode
                 phoneNumber:(NSString *)phoneNumber
                 newPassword:(NSString *)newPassword
                        code:(NSString *)code
                     success:(nullable TYSuccessHandler)success
                     failure:(nullable TYFailureError)failure;
</code></pre><p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">phoneNumber</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">newPassword</td>
<td style="text-align:left">new password</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>resetPasswordByPhone <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> resetPasswordByPhone<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> phoneNumber<span class="token punctuation">:</span><span class="token string">@&quot;your_phone_number&quot;</span> newPassword<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;resetPasswordByPhone success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;resetPasswordByPhone failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">resetPasswordByPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">resetPassword</span><span class="token punctuation">(</span>byPhone<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> phoneNumber<span class="token punctuation">:</span> <span class="token string">&quot;your_phone_number&quot;</span><span class="token punctuation">,</span> newPassword<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;resetPasswordByPhone success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;resetPasswordByPhone failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="use-email-for-login"><a name="use-email-for-login" class="anchor-navigation-ex-anchor" href="#use-email-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. Use Email for Login</h3>
<p>Tuya Smart provides the email password login system.</p>
<h4 id="user-email-password-registration"><a name="user-email-password-registration" class="anchor-navigation-ex-anchor" href="#user-email-password-registration"><i class="fa fa-link" aria-hidden="true"></i></a><a name="user-email-password-registration" class="plugin-anchor" href="#user-email-password-registration"><i class="fa fa-link" aria-hidden="true"></i></a>User Email Password Registration</h4>
<p>The email registration process is divided into the following two steps: get email verification code - register email password account.</p>
<p><strong>Declaration</strong></p>
<p>send verification code, used for email password register.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendVerifyCodeByRegisterEmail<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                                email<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>email
                              success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                              failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">email</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> sendVerifyCodeByRegisterEmail<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> email<span class="token punctuation">:</span><span class="token string">@&quot;your_email&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
      <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sendVerifyCode success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sendVerifyCode failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">sendVerifyCode</span><span class="token punctuation">(</span>byRegisterEmail<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&quot;your_email&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sendVerifyCode success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sendVerifyCode failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Email register</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>registerByEmail<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                  email<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>email
               password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
                   code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
                success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">Email</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">Password</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> registerByEmail<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> email<span class="token punctuation">:</span><span class="token string">@&quot;your_email&quot;</span> password<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;register success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;register failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>byEmail<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&quot;your_email&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;register success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;register failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="use-email-password-for-login"><a name="use-email-password-for-login" class="anchor-navigation-ex-anchor" href="#use-email-password-for-login"><i class="fa fa-link" aria-hidden="true"></i></a><a name="use-email-password-for-login" class="plugin-anchor" href="#use-email-password-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>Use Email Password for Login</h4>
<p><strong>Declaration</strong></p>
<p>SDK provides email and password login method.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByEmail<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
               email<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>email
            password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
             success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
             failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">phoneNumber</td>
<td style="text-align:left">Mobile phone number</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">Password</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByEmail<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> email<span class="token punctuation">:</span><span class="token string">@&quot;your_email&quot;</span> password<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byEmail<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&quot;your_email&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="reset-email-password"><a name="reset-email-password" class="anchor-navigation-ex-anchor" href="#reset-email-password"><i class="fa fa-link" aria-hidden="true"></i></a><a name="reset-email-password" class="plugin-anchor" href="#reset-email-password"><i class="fa fa-link" aria-hidden="true"></i></a>Reset email password</h4>
<p><strong>Declaration</strong></p>
<p>The process of resetting the password of the email is divided into the following two steps: obtain the email verification code (the API refers to the first interface of &quot;User Email Password Registration&quot;) - reset the password.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>resetPasswordByEmail<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                       email<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>email
                 newPassword<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>newPassword
                        code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
                     success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                     failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">Email</td>
</tr>
<tr>
<td style="text-align:left">newPassword</td>
<td style="text-align:left">New password</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">After the verification code sending, the verification code received</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>resetPasswordByEmail <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> resetPasswordByEmail<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> email<span class="token punctuation">:</span><span class="token string">@&quot;your_email&quot;</span> newPassword<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;verify_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;resetPasswordByEmail success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;resetPasswordByEmail failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">resetPasswordByEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">resetPassword</span><span class="token punctuation">(</span>byEmail<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&quot;your_email&quot;</span><span class="token punctuation">,</span> newPassword<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;verify_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;resetPasswordByEmail success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;resetPasswordByEmail failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="use-uid-for-login"><a name="use-uid-for-login" class="anchor-navigation-ex-anchor" href="#use-uid-for-login"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. Use Uid for Login</h3>
<h4 id="user-uid-registration-and-login"><a name="user-uid-registration-and-login" class="anchor-navigation-ex-anchor" href="#user-uid-registration-and-login"><i class="fa fa-link" aria-hidden="true"></i></a><a name="user-uid-registration-and-login" class="plugin-anchor" href="#user-uid-registration-and-login"><i class="fa fa-link" aria-hidden="true"></i></a>User Uid Registration and Login</h4>
<p><strong>Declaration</strong></p>
<p>If had registered, then automatically logged in. If had not registered, then automatically registered and logged in.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginOrRegisterWithCountryCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                                   uid<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>uid
                              password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
                            createHome<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>createHome
                               success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessID<span class="token punctuation">)</span>success
                               failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">user id</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">Password</td>
</tr>
<tr>
<td style="text-align:left">createHome</td>
<td style="text-align:left">Whether to create a default family</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginOrRegisterWithCountryCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> uid<span class="token punctuation">:</span><span class="token string">@&quot;your_uid&quot;</span> password<span class="token punctuation">:</span><span class="token string">@&quot;your_password&quot;</span> createHome<span class="token punctuation">:</span>YES success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>id result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;loginOrRegisterWithCountryCode success: %@&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;loginOrRegisterWithCountryCode failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">loginOrRegisterWithCountryCode</span><span class="token punctuation">(</span><span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> uid<span class="token punctuation">:</span> <span class="token string">&quot;your_uid&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">&quot;your_password&quot;</span><span class="token punctuation">,</span> createHome<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token keyword">in</span> 
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;loginOrRegisterWithCountryCode success: <span class="token interpolation"><span class="token delimiter variable">\(</span>result<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span> 
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;loginOrRegisterWithCountryCode failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="third-party-login"><a name="third-party-login" class="anchor-navigation-ex-anchor" href="#third-party-login"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. Third Party Login</h3>
<p>User needs to configure corresponding <code>AppID</code> and <code>AppSecret</code> in the <code>Tuya developer platform</code> &#x2013; <code>App development</code> &#x2013; <code>Third-party login</code>. The client shall be developed according to requirements of all platforms. After corresponding code is obtained, relevant login interface of tuyaSDK shall be invoked.</p>
<h4 id="login-on-wechat"><a name="login-on-wechat" class="anchor-navigation-ex-anchor" href="#login-on-wechat"><i class="fa fa-link" aria-hidden="true"></i></a><a name="login-on-wechat" class="plugin-anchor" href="#login-on-wechat"><i class="fa fa-link" aria-hidden="true"></i></a>Login on Wechat</h4>
<p><strong>Declaration</strong></p>
<p>Login on Wechat</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByWechat<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                 code<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>code
              success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
              failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">Code from Wechat authorization login</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByWechat <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByWechat<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> code<span class="token punctuation">:</span><span class="token string">@&quot;wechat_code&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loginByWechat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byWechat<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token string">&quot;wechat_code&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="login-on-qq"><a name="login-on-qq" class="anchor-navigation-ex-anchor" href="#login-on-qq"><i class="fa fa-link" aria-hidden="true"></i></a><a name="login-on-qq" class="plugin-anchor" href="#login-on-qq"><i class="fa fa-link" aria-hidden="true"></i></a>Login on QQ</h4>
<p><strong>Declaration</strong></p>
<p>Login on QQ</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByQQ<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
           userId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>userId
      accessToken<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>accessToken
          success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
          failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">userId</td>
<td style="text-align:left">User id</td>
</tr>
<tr>
<td style="text-align:left">accessToken</td>
<td style="text-align:left">AccessToken from QQ authorization login</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByQQ <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByQQ<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> openId<span class="token punctuation">:</span><span class="token string">@&quot;qq_open_id&quot;</span> accessToken<span class="token punctuation">:</span><span class="token string">@&quot;access_token&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"> <span class="token keyword">func</span> <span class="token function">loginByQQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byQQ<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">:</span> <span class="token string">&quot;qq_open_id&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">:</span> <span class="token string">&quot;access_token&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="login-on-facebook"><a name="login-on-facebook" class="anchor-navigation-ex-anchor" href="#login-on-facebook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="login-on-facebook" class="plugin-anchor" href="#login-on-facebook"><i class="fa fa-link" aria-hidden="true"></i></a>Login on Facebook</h4>
<p><strong>Declaration</strong></p>
<p>Login on Facebook</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByFacebook<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                  token<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>token
                success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">Token from Facebook authorization login</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByFacebook <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByFacebook<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> token<span class="token punctuation">:</span><span class="token string">@&quot;facebook_token&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"> <span class="token keyword">func</span> <span class="token function">loginByFacebook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byFacebook<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">:</span> <span class="token string">&quot;facebook_token&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="login-by-twitter"><a name="login-by-twitter" class="anchor-navigation-ex-anchor" href="#login-by-twitter"><i class="fa fa-link" aria-hidden="true"></i></a><a name="login-by-twitter" class="plugin-anchor" href="#login-by-twitter"><i class="fa fa-link" aria-hidden="true"></i></a>Login by Twitter</h4>
<p><strong>Declaration</strong></p>
<p>Login by Twitter</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByTwitter<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                   key<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>key
                secret<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>secret
               success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
               failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">key</td>
<td style="text-align:left">Key from Twitter authorization login</td>
</tr>
<tr>
<td style="text-align:left">secret</td>
<td style="text-align:left">ecret from Twitter authorization login</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc">
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByTwitter <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByTwitter<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> key<span class="token punctuation">:</span><span class="token string">@&quot;twitter_key&quot;</span> secret<span class="token punctuation">:</span><span class="token string">@&quot;twitter_secret&quot;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loginByTwitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>byTwitter<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token string">&quot;twitter_key&quot;</span><span class="token punctuation">,</span> secret<span class="token punctuation">:</span> <span class="token string">&quot;twitter_secret&quot;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
           <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="login-by-auth2"><a name="login-by-auth2" class="anchor-navigation-ex-anchor" href="#login-by-auth2"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.5. Login by Auth2</h3>
<p><strong>Declaration</strong></p>
<p>Auth2 is a general login interface. You can use some auth2 login type by passed type parameters.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginByAuth2WithType<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>type
                 countryCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>countryCode
                 accessToken<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>accessToken
                   extraInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>extraInfo
                     success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                     failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">type of Auth2 login(@&quot;ap&quot; for login with apple)</td>
</tr>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">accessToken</td>
<td style="text-align:left">AccessToken</td>
</tr>
<tr>
<td style="text-align:left">extraInfo</td>
<td style="text-align:left">Extra info</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginWithAuth2 <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByAuth2WithType<span class="token punctuation">:</span><span class="token string">@&quot;auth2_type&quot;</span> countryCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> accessToken<span class="token punctuation">:</span><span class="token string">@&quot;auth2_token&quot;</span> extraInfo<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">{</span><span class="token string">@&quot;info_key&quot;</span><span class="token punctuation">:</span> <span class="token string">@&quot;info_value&quot;</span><span class="token punctuation">}</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loginWithAuth2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loginByAuth2WithType</span><span class="token punctuation">(</span><span class="token string">&quot;auth2_type&quot;</span><span class="token punctuation">,</span> countryCode<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">:</span> <span class="token string">&quot;auth2_token&quot;</span><span class="token punctuation">,</span> extraInfo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;info_key&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;info_value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="login-with-apple"><a name="login-with-apple" class="anchor-navigation-ex-anchor" href="#login-with-apple"><i class="fa fa-link" aria-hidden="true"></i></a><a name="login-with-apple" class="plugin-anchor" href="#login-with-apple"><i class="fa fa-link" aria-hidden="true"></i></a>Login with Apple</h4>
<p><strong>Declaration</strong></p>
<p>The SDK supports Login with Apple from 3.14.0. After Apple login authorization is successful, information such as token and extraInfo are passed to the SDK through the Auth2 interface.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">@&quot;ap&quot;</td>
</tr>
<tr>
<td style="text-align:left">countryCode</td>
<td style="text-align:left">Country code, for example: 86</td>
</tr>
<tr>
<td style="text-align:left">accessToken</td>
<td style="text-align:left">credential.identityToken</td>
</tr>
<tr>
<td style="text-align:left">extraInfo</td>
<td style="text-align:left">@{@&quot;userIdentifier&quot;: credential.user, @&quot;email&quot;: credential.email, @&quot;nickname&quot;:credential.fullName.nickname, @&quot;snsNickname&quot;: credential.fullName.nickname}</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginWithApple <span class="token punctuation">{</span>
    ASAuthorizationAppleIDCredential <span class="token operator">*</span>credential <span class="token operator">=</span> authorization<span class="token punctuation">.</span>credential<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginByAuth2WithType<span class="token punctuation">:</span><span class="token string">@&quot;ap&quot;</span> countryCode<span class="token punctuation">:</span><span class="token string">@&quot;your_country_code&quot;</span> accessToken<span class="token punctuation">:</span>credential<span class="token punctuation">.</span>identityToken extraInfo<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">@&quot;userIdentifier&quot;</span><span class="token punctuation">:</span> credential<span class="token punctuation">.</span>user<span class="token punctuation">,</span> <span class="token string">@&quot;email&quot;</span><span class="token punctuation">:</span> credential<span class="token punctuation">.</span>email<span class="token punctuation">,</span> <span class="token string">@&quot;nickname&quot;</span><span class="token punctuation">:</span> credential<span class="token punctuation">.</span>fullName<span class="token punctuation">.</span>nickname<span class="token punctuation">,</span> <span class="token string">@&quot;snsNickname&quot;</span><span class="token punctuation">:</span> credential<span class="token punctuation">.</span>fullName<span class="token punctuation">.</span>nickname<span class="token punctuation">}</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;login failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loginWithApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> credential <span class="token operator">=</span> authorization<span class="token punctuation">.</span>credential
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loginByAuth2</span><span class="token punctuation">(</span>withType<span class="token punctuation">:</span> <span class="token string">&quot;ap&quot;</span><span class="token punctuation">,</span> countryCode<span class="token punctuation">:</span> <span class="token string">&quot;your_country_code&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">:</span> credential<span class="token operator">?</span><span class="token punctuation">.</span>identityToken<span class="token punctuation">,</span> extraInfo<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token string">&quot;userIdentifier&quot;</span><span class="token punctuation">:</span> user<span class="token punctuation">,</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">:</span> email<span class="token punctuation">,</span><span class="token string">&quot;nickname&quot;</span><span class="token punctuation">:</span> nickname<span class="token punctuation">,</span><span class="token string">&quot;snsNickname&quot;</span><span class="token punctuation">:</span> nickname<span class="token punctuation">]</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;login failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="modify-user-avatar"><a name="modify-user-avatar" class="anchor-navigation-ex-anchor" href="#modify-user-avatar"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.6. Modify User Avatar</h3>
<p><strong>Interface description</strong></p>
<p><strong>Declaration</strong></p>
<p>Used to upload user-defined avatars.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">headIcon</td>
<td style="text-align:left">Head Icon Image</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateHeadIcon<span class="token punctuation">:</span><span class="token punctuation">(</span>UIImage <span class="token operator">*</span><span class="token punctuation">)</span>headIcon <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> updateHeadIcon<span class="token punctuation">:</span>headIcon success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update head icon success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update head icon failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">updateHeadIcon</span><span class="token punctuation">(</span><span class="token number">_</span> headIcon<span class="token punctuation">:</span> <span class="token builtin">UIImage</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">updateHeadIcon</span><span class="token punctuation">(</span>headIcon<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update head icon success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update head icon failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="set-the-unit-of-temperature"><a name="set-the-unit-of-temperature" class="anchor-navigation-ex-anchor" href="#set-the-unit-of-temperature"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.7. Set the Unit of Temperature</h3>
<p><strong>Declaration</strong></p>
<p>Set the temperature in Celsius or Fahrenheit</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateTempUnitWithTempUnit<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>tempUnit
                           success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                           failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">tempUnit</td>
<td style="text-align:left">Temperature unit. 1 for <code>&#xB0;C</code>, 2 for <code>&#xB0;F</code></td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateTempUnitWithTempUnit<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>tempUnit <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> updateTempUnitWithTempUnit<span class="token punctuation">:</span>tempUnit success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update temp unit success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update temp unit failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">updateTempUnit</span><span class="token punctuation">(</span>withTempUnit tempUnit<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateTempUnit</span><span class="token punctuation">(</span>withTempUnit<span class="token punctuation">:</span> tempUnit<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update temp unit success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> error <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> error <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update temp unit failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="modify-nickname"><a name="modify-nickname" class="anchor-navigation-ex-anchor" href="#modify-nickname"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.8. Modify Nickname</h3>
<p><strong>Declaration</strong></p>
<p>Modify nickname</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateNickname<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>nickName
               success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
               failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">nickName</td>
<td style="text-align:left">Nick name</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>modifyNickname<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>nickname <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> updateNickname<span class="token punctuation">:</span>nickname success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;updateNickname success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;updateNickname failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">modifyNickname</span><span class="token punctuation">(</span><span class="token number">_</span> nickName<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">updateNickname</span><span class="token punctuation">(</span>nickName<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;updateNickname success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;updateNickname failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="update-timezone"><a name="update-timezone" class="anchor-navigation-ex-anchor" href="#update-timezone"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.9. Update Timezone</h3>
<p><strong>Declaration</strong></p>
<p>Update timezone</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateTimeZoneWithTimeZoneId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>timeZoneId
                             success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
                             failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">timeZoneId</td>
<td style="text-align:left">TimeZone ID. e.g. <code>Asia/Shanghai</code>.</td>
</tr>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateTimeZoneId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>timeZoneId <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> updateTimeZoneWithTimeZoneId<span class="token punctuation">:</span>timeZoneId success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update timeZoneId success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;update timeZoneId failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">updateTimeZoneId</span><span class="token punctuation">(</span><span class="token number">_</span> timeZoneId<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">updateTimeZone</span><span class="token punctuation">(</span>withTimeZoneId<span class="token punctuation">:</span> timeZoneId<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update timeZoneId success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;update timeZoneId failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="update-location"><a name="update-location" class="anchor-navigation-ex-anchor" href="#update-location"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.10. Update Location</h3>
<p><strong>Declaration</strong></p>
<p>If need, location can be reported through this api:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateLatitude<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>latitude longitude<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>longitude<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">latitude</td>
<td style="text-align:left">latitude</td>
</tr>
<tr>
<td style="text-align:left">longitude</td>
<td style="text-align:left">longitude</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateLocation <span class="token punctuation">{</span>
  <span class="token keyword">double</span> latitude <span class="token operator">=</span> <span class="token number">30.000</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> longitude <span class="token operator">=</span> <span class="token number">120.000</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartSDK sharedInstance<span class="token punctuation">]</span> updateLatitude<span class="token punctuation">:</span>latitude longitude<span class="token punctuation">:</span>longitude<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">updateLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">TuyaSmartSDK</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">updataLatitude</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">:</span> longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="logout"><a name="logout" class="anchor-navigation-ex-anchor" href="#logout"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.11. Logout</h3>
<p><strong>Declaration</strong></p>
<p>When the user account is switched, it is necessary to call the logout interface.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginOut<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
         failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loginOut <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> loginOut<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;logOut success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;logOut failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loginOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">loginOut</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;logOut success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;logOut failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="disable-account-deregister-user"><a name="disable-account-deregister-user" class="anchor-navigation-ex-anchor" href="#disable-account-deregister-user"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.12. Disable Account (Deregister User)</h3>
<p><strong>Declaration</strong></p>
<p>After one week, the account will be permanently disabled, and all information in the account will be deleted. If you log in to the account again before it is permanently disabled, your deregistration will be canceled.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>cancelAccount<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
              failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Param</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">success</td>
<td style="text-align:left">Success Callback</td>
</tr>
<tr>
<td style="text-align:left">failure</td>
<td style="text-align:left">Failure Callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>cancelAccount <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>TuyaSmartUser sharedInstance<span class="token punctuation">]</span> cancelAccount<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;cancel account success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;cancel account failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">cancelAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">TuyaSmartUser</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">cancelAccount</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;cancel account success&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;cancel account failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="handling-of-expired-session"><a name="handling-of-expired-session" class="anchor-navigation-ex-anchor" href="#handling-of-expired-session"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.13. Handling of Expired Session</h3>
<p>If you have not logged in to your account for a long time, the session expiration error will be returned when you access the server interface. You have to monitor the notification of the     <code>TuyaSmartUserNotificationUserSessionInvalid</code> and log in to the account again after the login page is displayed.</p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objc">
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loadNotification <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>NSNotificationCenter defaultCenter<span class="token punctuation">]</span> addObserver<span class="token punctuation">:</span><span class="token keyword">self</span> selector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>sessionInvalid<span class="token punctuation">)</span> name<span class="token punctuation">:</span>TuyaSmartUserNotificationUserSessionInvalid object<span class="token punctuation">:</span>nil<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sessionInvalid <span class="token punctuation">{</span>
  <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sessionInvalid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Go to login page</span>
    MyLoginViewController <span class="token operator">*</span>vc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>MyLoginViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>rootViewController <span class="token operator">=</span> vc<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>window makeKeyAndVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">loadNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">NotificationCenter</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span>sessionInvalid<span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token builtin">NSNotification</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span>rawValue<span class="token punctuation">:</span> <span class="token string">&quot;TuyaSmartUserNotificationUserSessionInvalid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> object<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token atrule">@objc</span> <span class="token keyword">func</span> <span class="token function">sessionInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sessionInvalid&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// Go to login page</span>
        <span class="token keyword">let</span> vc <span class="token operator">=</span> <span class="token function">MyLoginViewController</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        window<span class="token punctuation">.</span>rootViewController <span class="token operator">=</span> vc
        window<span class="token punctuation">.</span><span class="token function">makeKeyAndVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="iOSAdaptation.html" class="navigation navigation-prev " aria-label="Previous page: iOS Adaptation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="User.html#use-mobile-phone-for-login" class="navigation navigation-next " aria-label="Next page: Use Mobile Phone for Login">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"User Management","level":"1.7","depth":1,"next":{"title":"Use Mobile Phone for Login","level":"1.7.1","depth":2,"anchor":"#use-mobile-phone-for-login","path":"resource/User.md","ref":"./resource/User.md#use-mobile-phone-for-login","articles":[]},"previous":{"title":"iOS Adaptation","level":"1.6","depth":1,"path":"resource/iOSAdaptation.md","ref":"./resource/iOSAdaptation.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors","splitter","github","anchor-navigation-ex","ga","expandable-chapters-small","pageview-count","language-picker"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_home_ios_sdk"},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":false,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"ga":{"configuration":"auto","token":"UA-165828612-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/User.md","mtime":"2020-05-12T13:51:19.216Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-05-12T13:52:07.759Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

