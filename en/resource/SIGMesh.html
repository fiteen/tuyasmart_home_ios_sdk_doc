
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Bluetooth Mesh(SIG) Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="SIGMesh.html" />
    
    
    <link rel="prev" href="BLE.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Initiate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Demo.html">
            
                <a href="Demo.html">
            
                    
                    Demo App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="iOSAdaptation.html">
            
                <a href="iOSAdaptation.html">
            
                    
                    iOS Adaptation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="User.html">
            
                <a href="User.html#user-management">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="User.html">
            
                <a href="User.html#use-mobile-phone-for-login">
            
                    
                    Use Mobile Phone for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="User.html">
            
                <a href="User.html#use-email-for-login">
            
                    
                    Use Email for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="User.html">
            
                <a href="User.html#use-uid-for-login">
            
                    
                    Use Uid for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="User.html">
            
                <a href="User.html#third-party-login">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="User.html">
            
                <a href="User.html#login-by-auth2">
            
                    
                    Login by Auth2(Login with Apple)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="User.html">
            
                <a href="User.html#modify-user-avatar">
            
                    
                    Modify User Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="User.html">
            
                <a href="User.html#logout">
            
                    
                    Logout, Disable Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="User.html">
            
                <a href="User.html#handling-of-expired-session">
            
                    
                    Handling of Expired Session
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="HomeAbout.html">
            
                <a href="HomeAbout.html">
            
                    
                    Home Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Home.html">
            
                <a href="Home.html#home-relationship-management">
            
                    
                    Home Relationship Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="Home.html">
            
                <a href="Home.html#home-information-management">
            
                    
                    Operation of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Home.html">
            
                <a href="Home.html#member-management">
            
                    
                    Home Member Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="Home.html">
            
                <a href="Home.html#room-information-management">
            
                    
                    Room Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="Home.html">
            
                <a href="Home.html#home-weather">
            
                    
                    Home's Weather
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Activator.html">
            
                <a href="Activator.html#network-configuration">
            
                    
                    Network Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="Activator.html">
            
                <a href="Activator.html#quick-connection-mode">
            
                    
                    Quick Connection Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="Activator.html">
            
                <a href="Activator.html#hotspot-mode">
            
                    
                    HotSpot Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="Activator.html">
            
                <a href="Activator.html#wired-network-configuration">
            
                    
                    Wired Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="Activator.html">
            
                <a href="Activator.html#activate-the-sub-device">
            
                    
                    Activate the Sub-Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="Activator.html">
            
                <a href="Activator.html#qr-code-mode">
            
                    
                    QR code mode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Device.html">
            
                <a href="Device.html#device-management">
            
                    
                    Device Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Device.html">
            
                <a href="Device.html#update-device-information">
            
                    
                    Update Device Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Device.html">
            
                <a href="Device.html#device-control">
            
                    
                    Device Control
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="Device.html">
            
                <a href="Device.html#standard-device-control-beta">
            
                    
                    Standard Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="Device.html">
            
                <a href="Device.html#custom-device-control">
            
                    
                    Custom Device Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="Device.html">
            
                <a href="Device.html#modify-the-device-name">
            
                    
                    Modify the Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="Device.html">
            
                <a href="Device.html#remove-device">
            
                    
                    Remove Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="Device.html">
            
                <a href="Device.html#restore-factory-settings">
            
                    
                    Restore Factory Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="Device.html">
            
                <a href="Device.html#obtain-wi-fi-signal-strength-of-device">
            
                    
                    Obtain Wi-Fi Signal Strength of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="Device.html">
            
                <a href="Device.html#obtain-the-sub-device-list-of-a-gateway">
            
                    
                    Obtain the Sub-Device List of a Gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Device.html">
            
                <a href="Device.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Share.html">
            
                <a href="Share.html#shared-devices">
            
                    
                    Share Devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="Share.html">
            
                <a href="Share.html#add-device-share">
            
                    
                    Add Device Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="Share.html">
            
                <a href="Share.html#getting-shared-relationships">
            
                    
                    Getting Shared Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="Share.html">
            
                <a href="Share.html#remove-sharing">
            
                    
                    Remove Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="Share.html">
            
                <a href="Share.html#modify-note-name">
            
                    
                    Modify Note Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer Task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="SmartSceneAbout.html">
            
                <a href="SmartSceneAbout.html">
            
                    
                    Smart Scene
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="SmartScene.html">
            
                <a href="SmartScene.html#smart-scene-management">
            
                    
                    Smart Scene Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="SmartScene.html">
            
                <a href="SmartScene.html#scene-operation">
            
                    
                    Scene Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="BLE.html">
            
                <a href="BLE.html#single-ble">
            
                    
                    Single BLE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="BLE.html">
            
                <a href="BLE.html#bluetooth-status-monitor">
            
                    
                    Bluetooth Status Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-scan">
            
                    
                    Bluetooth Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="BLE.html">
            
                <a href="BLE.html#active-device">
            
                    
                    Active Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-ota-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="BLE.html">
            
                <a href="BLE.html#query-device-name">
            
                    
                    Query Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="BLE.html">
            
                <a href="BLE.html#device-dp-publish">
            
                    
                    Device DP Publish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="BLE.html">
            
                <a href="BLE.html#dual-mode-device-scan">
            
                    
                    Dual Mode Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="BLE.html">
            
                <a href="BLE.html#dual-mode-device-active">
            
                    
                    Dual Mode Active
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#bluetooth-mesh-sdk-guide">
            
                    
                    Bluetooth Mesh(SIG)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#introduction">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Mesh.html">
            
                <a href="Mesh.html#bluetooth-meshtuya-sdk-guide">
            
                    
                    Bluetooth Mesh(TUYA)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="Mesh.html">
            
                <a href="Mesh.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="Mesh.html">
            
                <a href="Mesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="Mesh.html">
            
                <a href="Mesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="Mesh.html">
            
                <a href="Mesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Message.html">
            
                <a href="Message.html#message-center">
            
                    
                    Message Center
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Message.html">
            
                <a href="Message.html#function-overview">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Message.html">
            
                <a href="Message.html#message">
            
                    
                    Message
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="Message.html">
            
                <a href="Message.html#push-notification">
            
                    
                    Push Notification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Feedback.html">
            
                <a href="Feedback.html#feedback">
            
                    
                    Feedback
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-talk-list">
            
                    
                    Obtain Feedback Talk List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-list">
            
                    
                    Obtain Feedback List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-type-list">
            
                    
                    Obtain Feedback Type List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4" data-path="Feedback.html">
            
                <a href="Feedback.html#add-feedback">
            
                    
                    Add Feedback
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="CommonInterface.html">
            
                <a href="CommonInterface.html">
            
                    
                    Common Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="Push.html">
            
                <a href="Push.html">
            
                    
                    Register PushId
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" >
            
                <a target="_blank" href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_api_reference/index.html">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Faq.html">
            
                <a href="Faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="ChangeLog.html">
            
                <a href="ChangeLog.html">
            
                    
                    ChangeLog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Bluetooth Mesh(SIG)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#bluetooth-mesh-sdk-guide"><b>1. </b>Bluetooth Mesh SDK Guide</a></li><ul><li><span class="title-icon "></span><a href="#introduction"><b>1.1. </b>Introduction</a></li><li><span class="title-icon "></span><a href="#basic-notion"><b>1.2. </b>Basic Notion</a></li><li><span class="title-icon "></span><a href="#management"><b>1.3. </b>Management</a></li><ul><li><span class="title-icon "></span><a href="#create-mesh"><b>1.3.1. </b>Create Mesh</a></li><li><span class="title-icon "></span><a href="#delete-mesh"><b>1.3.2. </b>Delete Mesh</a></li><li><span class="title-icon "></span><a href="#get-mesh-instance"><b>1.3.3. </b>Get Mesh Instance</a></li></ul><li><span class="title-icon "></span><a href="#configuration"><b>1.4. </b>Configuration</a></li><ul><li><span class="title-icon "></span><a href="#sub-device-network-connection"><b>1.4.1. </b>Sub-Device Network Connection</a></li><li><span class="title-icon "></span><a href="#sig-mesh-gateway-active"><b>1.4.2. </b>SIG Mesh Gateway Active</a></li></ul><li><span class="title-icon "></span><a href="#mesh-device"><b>1.5. </b>Mesh Device</a></li><ul><li><span class="title-icon "></span><a href="#local-connection-and-gateway-connection"><b>1.5.1. </b>Local Connection and Gateway Connection</a></li><li><span class="title-icon "></span><a href="#get-device-status"><b>1.5.2. </b>Get Device Status</a></li><li><span class="title-icon "></span><a href="#remove-device"><b>1.5.3. </b>Remove Device</a></li></ul><li><span class="title-icon "></span><a href="#mesh-group"><b>1.6. </b>Mesh Group</a></li><ul><li><span class="title-icon "></span><a href="#add-group"><b>1.6.1. </b>Add Group</a></li><li><span class="title-icon "></span><a href="#add-device-to-group"><b>1.6.2. </b>Add Device to Group</a></li><li><span class="title-icon "></span><a href="#remove-device-from-group"><b>1.6.3. </b>Remove Device From Group</a></li><li><span class="title-icon "></span><a href="#sync-group-info"><b>1.6.4. </b>Sync Group Info</a></li><li><span class="title-icon "></span><a href="#query-group-device"><b>1.6.5. </b>Query Group Device</a></li></ul><li><span class="title-icon "></span><a href="#mesh-control"><b>1.7. </b>Mesh Control</a></li><ul><li><span class="title-icon "></span><a href="#dp-publish"><b>1.7.1. </b>DP Publish</a></li></ul><li><span class="title-icon "></span><a href="#firmware-upgrade"><b>1.8. </b>Firmware Upgrade</a></li><ul><li><span class="title-icon "></span><a href="#query-firmware-info"><b>1.8.1. </b>Query Firmware Info</a></li><li><span class="title-icon "></span><a href="#sub-device-upgrade"><b>1.8.2. </b>Sub-Device Upgrade</a></li><li><span class="title-icon "></span><a href="#mesh-gateway-upgrade"><b>1.8.3. </b>Mesh Gateway upgrade</a></li></ul></ul></ul></div><h1 id="bluetooth-mesh-sdk-guide"><a name="bluetooth-mesh-sdk-guide" class="anchor-navigation-ex-anchor" href="#bluetooth-mesh-sdk-guide"><i class="fa fa-link" aria-hidden="true"></i></a>1. Bluetooth Mesh SDK Guide</h1>
<h2 id="introduction"><a name="introduction" class="anchor-navigation-ex-anchor" href="#introduction"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Introduction</h2>
<p>Bluetooth Special Interest Group use bluetooth technology began to fully support Mesh networks. Bluetooth Mesh, that is, a Bluetooth device is formed into a network. Each Bluetooth device can communicate through Bluetooth devices in the network, and transmit Bluetooth information at one end to the other end through the mesh network.</p>
<p>The standard Bluetooth Mesh, also called SIG Mesh, is a communication standard for the Mesh network proposed by the Bluetooth Technology Alliance. The use of Bluetooth Mesh for networking and function point updates must meet the standards of standard Bluetooth Mesh</p>
<h2 id="basic-notion"><a name="basic-notion" class="anchor-navigation-ex-anchor" href="#basic-notion"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Basic Notion</h2>
<table>
<thead>
<tr>
<th>Basic Notion</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pcc</td>
<td>Each mesh device corresponds to a product, and each product has its own size class label. The SDK uses <code>pcc</code> and<code>type</code> as the size class label.</td>
</tr>
<tr>
<td>mesh node Id</td>
<td>2 bytes. The node id is used to distinguish the &quot;unique identifier&quot; of each mesh device in the mesh network. For example, if you want to control a device, you can send the nodeId command corresponding to this device to the mesh network</td>
</tr>
<tr>
<td>mesh group local Id</td>
<td>2 bytes. The local Id is used to distinguish the `` unique identifier &apos;&apos; of each mesh group in the mesh network.For example, if you want to control the devices in a group, you can send the localId command corresponding to this group to the mesh network.</td>
</tr>
<tr>
<td>Local connection</td>
<td>The networked device is connected via Bluetooth to control mesh and command operations</td>
</tr>
<tr>
<td>Gateway connection</td>
<td>The networked devices are connected through the gateway (the gateway needs to be with the device, and the distance cannot be too far) to control the mesh and command operations</td>
</tr>
</tbody>
</table>
<p> The product currently follows the rules</p>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Device Type</th>
<th style="text-align:center">Product Type</th>
<th style="text-align:center">Sub Product Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">1=Tuya&apos;s standard device<br>2=Tuya&apos;s penetrate device<br></td>
<td style="text-align:center">0x01=light <br>0x02=switch <br>0x05=remote control re<br></td>
<td style="text-align:center">Like&#xFF1A;<br> 1= light <br> 2= wc light<br> 3= rgb light <br> 4=<br></td>
</tr>
</tbody>
</table>
<p>ex. pcc&#xFF08;2 bytes&#xFF0C;4 charac&#xFF09;</p>
<pre class="language-"><code class="lang-objective-c">     Tuya&apos;s standard device rgb light   <span class="token number">1310</span> <span class="token comment">// 1 01 4 read&#xFF0C; 1 means device type&#xFF0C;01 means product type, 4 means sub product type</span>
     Tuya&apos;s standard device rgbwc light     <span class="token number">1510</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p>Equipment operation requires multiple steps</p>
<p>Because device operations, such as adding and deleting operations, and group operations, require the local Bluetooth command to be executed once and recorded in the cloud once. The operation information needs to be synchronized to the local mesh network as well.</p>
<h2 id="management"><a name="management" class="anchor-navigation-ex-anchor" href="#management"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Management</h2>
<blockquote>
<p> <code>TuyaSmartBleMesh+SIGMesh.h</code> </p>
</blockquote>
<h3 id="create-mesh"><a name="create-mesh" class="anchor-navigation-ex-anchor" href="#create-mesh"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. Create Mesh</h3>
<p>A family can have multiple sig meshes (it is recommended to create only one family). All operations in the sig mesh are based on the family data being initialized.</p>
<blockquote>
<p>Init home <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Home.html#home-management" target="_blank">See</a></p>
</blockquote>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>createSIGMeshWithHomeId<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>homeId
                        success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>TuyaSmartBleMeshModel <span class="token operator">*</span>meshModel<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                        failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>homeId</td>
<td>homeId</td>
</tr>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objective-c">TuyaSmartHome <span class="token operator">*</span>home <span class="token operator">=</span> #<span class="token operator">&lt;</span> home instance <span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> homeId <span class="token operator">=</span> home<span class="token punctuation">.</span>homeModel<span class="token punctuation">.</span>homeId<span class="token punctuation">;</span>
<span class="token punctuation">[</span>TuyaSmartBleMesh createSIGMeshWithHomeId<span class="token punctuation">:</span>homeId success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>TuyaSmartBleMeshModel <span class="token operator">*</span>meshModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success do...</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;create mesh error: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="delete-mesh"><a name="delete-mesh" class="anchor-navigation-ex-anchor" href="#delete-mesh"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. Delete Mesh</h3>
<p><strong>Declaration</strong></p>
<p>Delete the mesh. If there are devices in the mesh group, the child devices are also removed.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeMeshWithSuccess<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token keyword">self</span><span class="token punctuation">.</span>mesh <span class="token operator">=</span> #<span class="token operator">&lt;</span>TuyaSmartBleMesh instance<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>mesh removeMeshWithSuccess<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token comment">// success do...</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">XCTFail</span><span class="token punctuation">(</span><span class="token string">@&quot;test remove mesh failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="get-the-list-of-sig-mesh-in-the-family"><a name="get-the-list-of-sig-mesh-in-the-family" class="anchor-navigation-ex-anchor" href="#get-the-list-of-sig-mesh-in-the-family"><i class="fa fa-link" aria-hidden="true"></i></a><a name="get-the-list-of-sig-mesh-in-the-family" class="plugin-anchor" href="#get-the-list-of-sig-mesh-in-the-family"><i class="fa fa-link" aria-hidden="true"></i></a>Get the List of SIG Mesh in the Family</h4>
<p><strong>Declaration</strong></p>
<p>After initializing the home instance, you can get the mesh list of the corresponding family</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getSIGMeshListWithSuccess<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray <span class="token operator">&lt;</span>TuyaSmartBleMeshModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                          failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objective-c">TuyaSmartHome <span class="token operator">*</span>home <span class="token operator">=</span> #<span class="token operator">&lt;</span>home instance<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>home getSIGMeshListWithSuccess<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartBleMeshModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success do</span>
<span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;get sig mesh list error: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="get-mesh-instance"><a name="get-mesh-instance" class="anchor-navigation-ex-anchor" href="#get-mesh-instance"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. Get Mesh Instance</h3>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>bleMeshWithMeshId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>meshId homeId<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>homeId<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>meshId</td>
<td>mesh id</td>
</tr>
<tr>
<td>homeId</td>
<td>home id</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// The home instance (TuyaSmartHome instance) can get the sigMeshModel under the class</span>
TuyaSmartBleMeshModel <span class="token operator">*</span>sigMeshModel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">self</span> getCurrentHome<span class="token punctuation">]</span><span class="token punctuation">.</span>sigMeshModel<span class="token punctuation">;</span>
</code></pre>
<h2 id="configuration"><a name="configuration" class="anchor-navigation-ex-anchor" href="#configuration"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Configuration</h2>
<blockquote>
<p> <code>TuyaSmartSIGMeshManager</code> </p>
</blockquote>
<p>The distribution network refers to adding devices that are in the reset state and not connected to the sig mesh network.</p>
<p>The following is a list of common device reset methods</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>reset</th>
<th>show</th>
</tr>
</thead>
<tbody>
<tr>
<td>Light</td>
<td>Three consecutive switches</td>
<td>flashes quickly</td>
</tr>
<tr>
<td>Switch</td>
<td>Long press 3s</td>
<td>flashes quickly</td>
</tr>
</tbody>
</table>
<h4 id="bluetooth-scan"><a name="bluetooth-scan" class="anchor-navigation-ex-anchor" href="#bluetooth-scan"><i class="fa fa-link" aria-hidden="true"></i></a><a name="bluetooth-scan" class="plugin-anchor" href="#bluetooth-scan"><i class="fa fa-link" aria-hidden="true"></i></a>Bluetooth Scan</h4>
<p><strong>Declaration</strong></p>
<p>Scan for nearby SIG-compliant Bluetooth devices</p>
<blockquote>
<p>The meshModel here needs to be passed in the sigMeshModel parameter in TuyaSmartHome, not the meshModel</p>
</blockquote>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>startScanWithScanType<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGScanType<span class="token punctuation">)</span>scanType 
          meshModel<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartBleMeshModel <span class="token operator">*</span><span class="token punctuation">)</span>meshModel<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>scanType</td>
<td>Scanning type, currently divided into unconfigured network and configured network, the scanned network will automatically enter the network</td>
</tr>
<tr>
<td>meshModel</td>
<td>mesh model</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token comment">// ScanForUnprovision, // Scan for unconfigured devices</span>
<span class="token comment">// ScanForProxyed, // Scan for devices that have been configured</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span> startScanWithScanType<span class="token punctuation">:</span>ScanForUnprovision 
                            meshModel<span class="token punctuation">:</span>home<span class="token punctuation">.</span>sigMeshModel<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>After scanning the device, you can implement the following methods in the TuyaSmartSIGMeshManagerDelegate callback to get the scanned device.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 Scanning to devices to be configured
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
     didScanedDevice<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshDiscoverDeviceInfo <span class="token operator">*</span><span class="token punctuation">)</span>device<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>manager</td>
<td>mesh manager</td>
</tr>
<tr>
<td>device</td>
<td>Network equipment information to be allocated</td>
</tr>
</tbody>
</table>
<p><strong>Sub Device Bluetooth distribution network</strong></p>
<p>After scanning the surrounding network devices that meet the protocol specifications, you can configure the network (s).</p>
<p>Networking is to add Bluetooth devices that have not joined the mesh network to the mesh network through a certain communication process.</p>
<h4 id="active"><a name="active" class="anchor-navigation-ex-anchor" href="#active"><i class="fa fa-link" aria-hidden="true"></i></a><a name="active" class="plugin-anchor" href="#active"><i class="fa fa-link" aria-hidden="true"></i></a>Active</h4>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>startActive<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartSIGMeshDiscoverDeviceInfo <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>devList
          meshModel<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartBleMeshModel <span class="token operator">*</span><span class="token punctuation">)</span>meshModel<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devList</td>
<td>List of devices to be activated</td>
</tr>
<tr>
<td>meshModel</td>
<td>mesh model</td>
</tr>
</tbody>
</table>
<p><strong>delegate</strong></p>
<p><strong>Declaration</strong></p>
<p>When a device is activated successfully or fails, the following methods will be called back through TuyaSmartSIGMeshManagerDelegate: Activate child device successfully callback</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager 
    didActiveSubDevice<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshDiscoverDeviceInfo <span class="token operator">*</span><span class="token punctuation">)</span>device 
                 devId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>devId
                 error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>manager</td>
<td>mesh manager</td>
</tr>
<tr>
<td>device</td>
<td>Device</td>
</tr>
<tr>
<td>devId</td>
<td>dev Id</td>
</tr>
<tr>
<td>error</td>
<td>active error&#xFF0C;<code>name</code> or <code>deviceId</code> is empty</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p> Activate child device failure callback</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager 
 didFailToActiveDevice<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshDiscoverDeviceInfo <span class="token operator">*</span><span class="token punctuation">)</span>device 
                 error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>manager</td>
<td>mesh manager</td>
</tr>
<tr>
<td>device</td>
<td>Device</td>
</tr>
<tr>
<td>error</td>
<td>errors</td>
</tr>
</tbody>
</table>
<h4 id="deactivate-device"><a name="deactivate-device" class="anchor-navigation-ex-anchor" href="#deactivate-device"><i class="fa fa-link" aria-hidden="true"></i></a><a name="deactivate-device" class="plugin-anchor" href="#deactivate-device"><i class="fa fa-link" aria-hidden="true"></i></a>Deactivate Device</h4>
<p><strong>Declaration</strong></p>
<p>At any stage in the scanning device and network configuration, calling the following methods will stop the network configuration process for Bluetooth devices.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>stopActiveDevice<span class="token punctuation">;</span>
</code></pre>
<h3 id="sub-device-network-connection"><a name="sub-device-network-connection" class="anchor-navigation-ex-anchor" href="#sub-device-network-connection"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. Sub-Device Network Connection</h3>
<p>After entering the network, it is scanned first, but the scan type is changed to ScanForProxyed, and then the network can be automatically connected</p>
<h4 id="mesh-connection-flag"><a name="mesh-connection-flag" class="anchor-navigation-ex-anchor" href="#mesh-connection-flag"><i class="fa fa-link" aria-hidden="true"></i></a><a name="mesh-connection-flag" class="plugin-anchor" href="#mesh-connection-flag"><i class="fa fa-link" aria-hidden="true"></i></a>Mesh Connection Flag</h4>
<p>In the process of operation, it is often judged whether the existing equipment of the mesh is connected to the network through Bluetooth to determine the method of issuing control commands and operation commands.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// mesh local connection identifier, there is a device connected via Bluetooth, this attribute is yes</span>
BOOL isLogin <span class="token operator">=</span> <span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>isLogin<span class="token punctuation">;</span>
</code></pre>
<h3 id="sig-mesh-gateway-active"><a name="sig-mesh-gateway-active" class="anchor-navigation-ex-anchor" href="#sig-mesh-gateway-active"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. SIG Mesh Gateway Active</h3>
<p>SIG Mesh gateway active EZ , see <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Activator.html#activate-the-zigbee-sub-device" target="_blank"> EZ mode</a></p>
<p>SIG Mesh gateway atcive sub device, see <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Activator.html#activate-the-zigbee-sub-device" target="_blank">sub-device</a></p>
<h2 id="mesh-device"><a name="mesh-device" class="anchor-navigation-ex-anchor" href="#mesh-device"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. Mesh Device</h2>
<blockquote>
<p>Like the Home SDK, the device class is TuyaSmartDevice. The deviceType information in TuyaSmartDeviceModel inside can distinguish the device type.</p>
<p>Here the mesh device corresponds to the deviceType type TuyaSmartDeviceModelTypeSIGMeshSubDev</p>
</blockquote>
<h4 id="get-device-instance"><a name="get-device-instance" class="anchor-navigation-ex-anchor" href="#get-device-instance"><i class="fa fa-link" aria-hidden="true"></i></a><a name="get-device-instance" class="plugin-anchor" href="#get-device-instance"><i class="fa fa-link" aria-hidden="true"></i></a>Get Device Instance</h4>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>deviceWithDeviceId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>devId<span class="token punctuation">;</span>
</code></pre>
<h3 id="local-connection-and-gateway-connection"><a name="local-connection-and-gateway-connection" class="anchor-navigation-ex-anchor" href="#local-connection-and-gateway-connection"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. Local Connection and Gateway Connection</h3>
<h4 id="local-connection"><a name="local-connection" class="anchor-navigation-ex-anchor" href="#local-connection"><i class="fa fa-link" aria-hidden="true"></i></a><a name="local-connection" class="plugin-anchor" href="#local-connection"><i class="fa fa-link" aria-hidden="true"></i></a>Local Connection</h4>
<p>The Bluetooth of the mobile phone is turned on and the mesh device is controlled by Bluetooth.</p>
<p> <code>deviceModel.isOnline &amp;&amp; deviceModel.isMeshBleOnline</code></p>
<h4 id="gateway-connection"><a name="gateway-connection" class="anchor-navigation-ex-anchor" href="#gateway-connection"><i class="fa fa-link" aria-hidden="true"></i></a><a name="gateway-connection" class="plugin-anchor" href="#gateway-connection"><i class="fa fa-link" aria-hidden="true"></i></a>Gateway Connection</h4>
<p>The mobile phone&apos;s Bluetooth is not turned on or is far away from the device. The mesh device controls the connection through the gateway and issues commands by Wi-Fi.</p>
<p> <code>deviceModel.isOnline &amp;&amp; !deviceModel.isMeshBleOnline</code></p>
<h3 id="get-device-status"><a name="get-device-status" class="anchor-navigation-ex-anchor" href="#get-device-status"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.2. Get Device Status</h3>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getDeviceStatusWithDeviceModel<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartDeviceModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceModel<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>deviceModel</td>
<td>device model</td>
</tr>
</tbody>
</table>
<h3 id="remove-device"><a name="remove-device" class="anchor-navigation-ex-anchor" href="#remove-device"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.3. Remove Device</h3>
<p><a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Device.html#remove-device" target="_blank">See</a></p>
<h2 id="mesh-group"><a name="mesh-group" class="anchor-navigation-ex-anchor" href="#mesh-group"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. Mesh Group</h2>
<p>In the Bluetooth Mesh network, you can group some devices into groups and use group commands to control the devices in the group. For example, you can add all light groups to a group, and control the group&apos;s switches, colors, etc. directly. All lights in the control group have the same properties</p>
<h3 id="add-group"><a name="add-group" class="anchor-navigation-ex-anchor" href="#add-group"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.1. Add Group</h3>
<blockquote>
<p>For the addition of SIG Mesh groups, in order to ensure consistent functions, it is recommended to add devices of the same category to the group</p>
</blockquote>
<p>Before adding a group, you need to get the group address from the server: You can call the following of TuyaSmartBleMeshGroup</p>
<p><strong>Declaration</strong></p>
<p>Assign a group ID to the cloud</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getBleMeshGroupAddressFromCluondWithMeshId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>meshId
                                           success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessInt<span class="token punctuation">)</span>success
                                           failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>meshId</td>
<td>mesh id</td>
</tr>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>The group address returned from the server needs to be added with 0x4000, and then called to get a group named by groupName under the current sigMeshModel</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>createMeshGroupWithGroupName<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>groupName
                              meshId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>meshId
                             localId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>localId
                                 pcc<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>pcc
                             success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessInt<span class="token punctuation">)</span>success
                             failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>groupName</td>
<td>mesh group name</td>
</tr>
<tr>
<td>meshId</td>
<td>meshId</td>
</tr>
<tr>
<td>localId</td>
<td>2 bytes hex string</td>
</tr>
<tr>
<td>pcc</td>
<td>pcc</td>
</tr>
<tr>
<td>success</td>
<td>success block , groupId</td>
</tr>
<tr>
<td>failure</td>
<td>failure</td>
</tr>
</tbody>
</table>
<h3 id="add-device-to-group"><a name="add-device-to-group" class="anchor-navigation-ex-anchor" href="#add-device-to-group"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.2. Add Device to Group</h3>
<blockquote>
<p>  <code>groupAddress = [localId inValue]</code> </p>
</blockquote>
<h4 id="bluetooth"><a name="bluetooth" class="anchor-navigation-ex-anchor" href="#bluetooth"><i class="fa fa-link" aria-hidden="true"></i></a><a name="bluetooth" class="plugin-anchor" href="#bluetooth"><i class="fa fa-link" aria-hidden="true"></i></a>Bluetooth</h4>
<p>If you need to add a device to the group, you need to call the following method of <code>TuyaSmartSIGMeshManager</code></p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addDeviceToGroupWithDevId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>devId
                     groupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>groupAddress<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devId</td>
<td>dev id</td>
</tr>
<tr>
<td>groupAddress</td>
<td>group address</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartSIGMeshManagerDelegate</strong></p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager 
  didHandleGroupWithGroupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>nonnull NSString <span class="token operator">*</span><span class="token punctuation">)</span>groupAddress 
            deviceNodeId<span class="token punctuation">:</span><span class="token punctuation">(</span>nonnull NSString <span class="token operator">*</span><span class="token punctuation">)</span>nodeId 
               error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>manager</td>
<td>manager</td>
</tr>
<tr>
<td>groupAddress</td>
<td>group mesh address</td>
</tr>
<tr>
<td>nodeId</td>
<td>device mesh address</td>
</tr>
<tr>
<td>error</td>
<td>error</td>
</tr>
</tbody>
</table>
<h4 id="gateway"><a name="gateway" class="anchor-navigation-ex-anchor" href="#gateway"><i class="fa fa-link" aria-hidden="true"></i></a><a name="gateway" class="plugin-anchor" href="#gateway"><i class="fa fa-link" aria-hidden="true"></i></a>Gateway</h4>
<p>Adding sub-devices to the mesh group through the gateway can be operated through </p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c">  <span class="token comment">/**
   Adding a sig mesh sub-device group through a sig mesh gateway
    Need to ensure that the sub-device relationship belongs to the sig mesh gateway
   */</span>
  <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addSubDeviceWithSubList<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartDeviceModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull <span class="token punctuation">)</span>subList success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>

  <span class="token comment">//  TuyaSmartBleMeshGroupDelegate </span>
  <span class="token keyword">@protocol</span> TuyaSmartBleMeshGroupDelegate <span class="token operator">&lt;</span>NSObject<span class="token operator">&gt;</span>

  <span class="token comment">/// Group Response of Zigbee Devices Joining Gateway</span>
  <span class="token comment">/// 1: Over the Scenario Limit 2: Subdevice Timeout 3: Setting Value Out of Range 4: Write File Error 5: Other Errors</span>
  <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>meshGroup<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartBleMeshGroup <span class="token operator">*</span><span class="token punctuation">)</span>group addResponseCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">&lt;</span>NSNumber <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>responseCode<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>subList</td>
<td>Sub-devices under the gateway to be operated</td>
</tr>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<h3 id="remove-device-from-group"><a name="remove-device-from-group" class="anchor-navigation-ex-anchor" href="#remove-device-from-group"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.3. Remove Device From Group</h3>
<h4 id="bluetooth_1"><a name="bluetooth_1" class="anchor-navigation-ex-anchor" href="#bluetooth_1"><i class="fa fa-link" aria-hidden="true"></i></a><a name="bluetooth" class="plugin-anchor" href="#bluetooth"><i class="fa fa-link" aria-hidden="true"></i></a>Bluetooth</h4>
<p><strong>Declaration</strong></p>
<p>If you need to remove a device from the group, you can use the following methods:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>deleteDeviceToGroupWithDevId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>devId groupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>groupAddress<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devId</td>
<td>dev id</td>
</tr>
<tr>
<td>groupAddress</td>
<td>group address</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartSIGMeshManagerDelegate</strong></p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager 
  didHandleGroupWithGroupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>nonnull NSString <span class="token operator">*</span><span class="token punctuation">)</span>groupAddress 
            deviceNodeId<span class="token punctuation">:</span><span class="token punctuation">(</span>nonnull NSString <span class="token operator">*</span><span class="token punctuation">)</span>nodeId 
               error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>manager</td>
<td>manager</td>
</tr>
<tr>
<td>groupAddress</td>
<td>group mesh address</td>
</tr>
<tr>
<td>nodeId</td>
<td>device mesh address</td>
</tr>
<tr>
<td>error</td>
<td>error</td>
</tr>
</tbody>
</table>
<h4 id="gateway_1"><a name="gateway_1" class="anchor-navigation-ex-anchor" href="#gateway_1"><i class="fa fa-link" aria-hidden="true"></i></a><a name="gateway" class="plugin-anchor" href="#gateway"><i class="fa fa-link" aria-hidden="true"></i></a>Gateway</h4>
<p>Deleting devices into the mesh group through the gateway can be operated through <code>TuyaSmartBleMeshGroup</code></p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c">  <span class="token comment">/**
   Adding a sig mesh sub-device group through a sig mesh gateway
    Need to ensure that the sub-device relationship belongs to the sig mesh gateway
   */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeSubDeviceWithSubList<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartDeviceModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull <span class="token punctuation">)</span>subList success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>subList</td>
<td>Sub-devices under the gateway to be operated</td>
</tr>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartBleMeshGroupDelegate</strong></p>
<pre class="language-"><code class="lang-objective-c">  <span class="token comment">//  TuyaSmartBleMeshGroupDelegate callback</span>
  <span class="token keyword">@protocol</span> TuyaSmartBleMeshGroupDelegate <span class="token operator">&lt;</span>NSObject<span class="token operator">&gt;</span>

  <span class="token comment">/// Group Response of Zigbee Devices removing Gateway</span>
  <span class="token comment">/// 1: Over the Scenario Limit 2: Subdevice Timeout 3: Setting Value Out of Range 4: Write File Error 5: Other Errors</span>
  <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>meshGroup<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartBleMeshGroup <span class="token operator">*</span><span class="token punctuation">)</span>group removeResponseCode<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">&lt;</span>NSNumber <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>responseCode<span class="token punctuation">;</span>

  <span class="token keyword">@end</span>
</code></pre>
<h3 id="sync-group-info"><a name="sync-group-info" class="anchor-navigation-ex-anchor" href="#sync-group-info"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.4. Sync Group Info</h3>
<p>If the add \ deletion succeeds or fails, you can receive the result through the proxy method, and use the group instance to change the cloud device synchronization within the group.</p>
<h4 id="add-device"><a name="add-device" class="anchor-navigation-ex-anchor" href="#add-device"><i class="fa fa-link" aria-hidden="true"></i></a><a name="add-device" class="plugin-anchor" href="#add-device"><i class="fa fa-link" aria-hidden="true"></i></a>Add Device</h4>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// TuyaSmartBleMeshGroup </span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addDeviceWithDeviceId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>deviceId success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<h4 id="remove-device_1"><a name="remove-device_1" class="anchor-navigation-ex-anchor" href="#remove-device_1"><i class="fa fa-link" aria-hidden="true"></i></a><a name="remove-device" class="plugin-anchor" href="#remove-device"><i class="fa fa-link" aria-hidden="true"></i></a>Remove Device</h4>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeDeviceWithDeviceId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>deviceId success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<h3 id="query-group-device"><a name="query-group-device" class="anchor-navigation-ex-anchor" href="#query-group-device"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.5. Query Group Device</h3>
<p><strong>Declaration</strong></p>
<p>Query devices in a group by group address</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>queryGroupMemberWithGroupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>groupAddress<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>groupAddress</td>
<td>group address</td>
</tr>
</tbody>
</table>
<p><strong>Callback</strong></p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sigMeshManager<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSIGMeshManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
      queryDeviceModel<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartDeviceModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceModel
          groupAddress<span class="token punctuation">:</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>groupAddress<span class="token punctuation">;</span>
</code></pre>
<h2 id="mesh-control"><a name="mesh-control" class="anchor-navigation-ex-anchor" href="#mesh-control"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. Mesh Control</h2>
<h3 id="dp-publish"><a name="dp-publish" class="anchor-navigation-ex-anchor" href="#dp-publish"><i class="fa fa-link" aria-hidden="true"></i></a>1.7.1. DP Publish</h3>
<p><code>{&quot;(dpId)&quot; : &quot;(dpValue)&quot;}</code>,  <code>@{@&quot;101&quot; : @&quot;44&quot;}</code></p>
<h4 id="device-control"><a name="device-control" class="anchor-navigation-ex-anchor" href="#device-control"><i class="fa fa-link" aria-hidden="true"></i></a><a name="device-control" class="plugin-anchor" href="#device-control"><i class="fa fa-link" aria-hidden="true"></i></a>Device Control</h4>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// TuyaSmartDevice </span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>publishDps<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>dps
           success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success
           failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dps</td>
<td>dp dictionary</td>
</tr>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<h4 id="group-control"><a name="group-control" class="anchor-navigation-ex-anchor" href="#group-control"><i class="fa fa-link" aria-hidden="true"></i></a><a name="group-control" class="plugin-anchor" href="#group-control"><i class="fa fa-link" aria-hidden="true"></i></a>Group Control</h4>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// TuyaSmartBleMeshGroup</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>publishDps<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>dps success<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYSuccessHandler<span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>nullable TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<h2 id="firmware-upgrade"><a name="firmware-upgrade" class="anchor-navigation-ex-anchor" href="#firmware-upgrade"><i class="fa fa-link" aria-hidden="true"></i></a>1.8. Firmware Upgrade</h2>
<h3 id="query-firmware-info"><a name="query-firmware-info" class="anchor-navigation-ex-anchor" href="#query-firmware-info"><i class="fa fa-link" aria-hidden="true"></i></a>1.8.1. Query Firmware Info</h3>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">//  TuyaSmartDevice </span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getFirmwareUpgradeInfo<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray <span class="token operator">&lt;</span>TuyaSmartFirmwareUpgradeModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>upgradeModelList<span class="token punctuation">)</span><span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>

<span class="token comment">/*
type 
     0  updrading
     1  no upgrade
     2  force or remind upgrade
     3  check upgrade
*/</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>success block</td>
</tr>
<tr>
<td>failure</td>
<td>failure block</td>
</tr>
</tbody>
</table>
<h3 id="sub-device-upgrade"><a name="sub-device-upgrade" class="anchor-navigation-ex-anchor" href="#sub-device-upgrade"><i class="fa fa-link" aria-hidden="true"></i></a>1.8.2. Sub-Device Upgrade</h3>
<h4 id="ensure-device-online"><a name="ensure-device-online" class="anchor-navigation-ex-anchor" href="#ensure-device-online"><i class="fa fa-link" aria-hidden="true"></i></a><a name="ensure-device-online" class="plugin-anchor" href="#ensure-device-online"><i class="fa fa-link" aria-hidden="true"></i></a>Ensure Device Online</h4>
<p>The sub-devices are upgraded through Bluetooth, so you need to determine whether the device is locally connected, and confirm the local online before performing subsequent operations.</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// BOOL isBLEOnline = device.deviceModel.isMeshBleOnline;</span>
</code></pre>
<h4 id="tell-sdk-upgrade-device-node-id"><a name="tell-sdk-upgrade-device-node-id" class="anchor-navigation-ex-anchor" href="#tell-sdk-upgrade-device-node-id"><i class="fa fa-link" aria-hidden="true"></i></a><a name="tell-sdk-upgrade-device-node-id" class="plugin-anchor" href="#tell-sdk-upgrade-device-node-id"><i class="fa fa-link" aria-hidden="true"></i></a>Tell SDK Upgrade Device Node Id</h4>
<pre class="language-"><code class="lang-objc"><span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span> prepareForOTAWithTargetNodeId<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">.</span>device<span class="token punctuation">.</span>deviceModel<span class="token punctuation">.</span>nodeId<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="wait-device-upgrade-success-callback"><a name="wait-device-upgrade-success-callback" class="anchor-navigation-ex-anchor" href="#wait-device-upgrade-success-callback"><i class="fa fa-link" aria-hidden="true"></i></a><a name="wait-device-upgrade-success-callback" class="plugin-anchor" href="#wait-device-upgrade-success-callback"><i class="fa fa-link" aria-hidden="true"></i></a>Wait Device Upgrade Success Callback</h4>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// TuyaSmartSIGMeshManagerDelegate </span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>notifySIGLoginSuccess <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> nil<span class="token punctuation">;</span>
    <span class="token comment">//weakify(self);</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartSIGMeshManager sharedInstance<span class="token punctuation">]</span> startSendOTAPack<span class="token punctuation">:</span>_otaData targetVersion<span class="token punctuation">:</span>_upgradeModel<span class="token punctuation">.</span>version success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token comment">//strongify(self);</span>
      <span class="token comment">// update version</span>
        <span class="token punctuation">[</span><span class="token keyword">self</span> updateVersion<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token comment">// log error</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="update-device-version"><a name="update-device-version" class="anchor-navigation-ex-anchor" href="#update-device-version"><i class="fa fa-link" aria-hidden="true"></i></a><a name="update-device-version" class="plugin-anchor" href="#update-device-version"><i class="fa fa-link" aria-hidden="true"></i></a>Update Device Version</h4>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>updateVersion <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>device updateDeviceVersion<span class="token punctuation">:</span>_upgradeModel<span class="token punctuation">.</span>version type<span class="token punctuation">:</span>_upgradeModel<span class="token punctuation">.</span>type success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token comment">// ota success</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// log error</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="mesh-gateway-upgrade"><a name="mesh-gateway-upgrade" class="anchor-navigation-ex-anchor" href="#mesh-gateway-upgrade"><i class="fa fa-link" aria-hidden="true"></i></a>1.8.3. Mesh Gateway upgrade</h3>
<p>See <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Device.html#firmware-upgrade" target="_blank">firmware upgrade</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="BLE.html#dual-mode-device-active" class="navigation navigation-prev " aria-label="Previous page: Dual Mode Active">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="SIGMesh.html#introduction" class="navigation navigation-next " aria-label="Next page: Basic Notion">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Bluetooth Mesh(SIG)","level":"1.16","depth":1,"next":{"title":"Basic Notion","level":"1.16.1","depth":2,"anchor":"#introduction","path":"resource/SIGMesh.md","ref":"./resource/SIGMesh.md#introduction","articles":[]},"previous":{"title":"Dual Mode Active","level":"1.15.8","depth":2,"anchor":"#dual-mode-device-active","path":"resource/BLE.md","ref":"./resource/BLE.md#dual-mode-device-active","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors","splitter","github","anchor-navigation-ex","ga","expandable-chapters-small","pageview-count","language-picker"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_home_ios_sdk"},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":false,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"ga":{"configuration":"auto","token":"UA-165828612-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/SIGMesh.md","mtime":"2020-05-12T13:51:19.216Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-05-12T13:52:07.759Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

